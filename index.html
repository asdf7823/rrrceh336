<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>ì „ì ê»ì§ˆ 3D ì‹œë®¬ë ˆì´ì…˜</title>
  <style>
    body {
      background: #0b0c10;
      color: white;
      font-family: 'Segoe UI', sans-serif;
      text-align: center;
      margin: 0;
      padding: 20px;
    }
    h1 {
      color: #66fcf1;
    }
    canvas {
      background-color: #1f2833;
      border: 2px solid #45a29e;
      border-radius: 10px;
      display: block;
      margin: 20px auto;
    }
    .controls {
      margin-bottom: 20px;
    }
    .controls input {
      width: 60px;
      padding: 8px;
      margin: 5px;
      border: 1px solid #66fcf1;
      border-radius: 8px;
      background: #0b0c10;
      color: white;
      text-align: center;
    }
    button {
      padding: 10px 20px;
      background-color: #66fcf1;
      color: #0b0c10;
      border: none;
      border-radius: 12px;
      cursor: pointer;
      font-weight: bold;
      margin-top: 10px;
    }
    button:hover {
      background-color: #45a29e;
    }
    .result {
      margin-top: 20px;
      font-size: 18px;
    }
    .highlight {
      color: #f1fa8c;
    }
    .ground {
      color: #00ff88;
    }
    .excited {
      color: #ff5555;
    }
    .unknown {
      color: #999999;
    }
  </style>
</head>
<body>
  <h1>ì „ì ê»ì§ˆ 3D ì‹œë®¬ë ˆì´ì…˜</h1>

  <div class="controls">
    <label>K: <input type="number" id="kShell" min="0" max="2" value="2"></label>
    <label>L: <input type="number" id="lShell" min="0" max="8" value="8"></label>
    <label>M: <input type="number" id="mShell" min="0" max="18" value="1"></label>
    <label>N: <input type="number" id="nShell" min="0" max="32" value="0"></label>
    <br>
    <button onclick="simulate()">ì‹œë®¬ë ˆì´ì…˜ ì‹œì‘</button>
  </div>

  <canvas id="canvas" width="600" height="600"></canvas>

  <div class="result" id="resultArea"></div>

  <script>
    const canvas = document.getElementById('canvas');
    const ctx = canvas.getContext('2d');
    const centerX = canvas.width / 2;
    const centerY = canvas.height / 2;

    const knownAtoms = {
      "1": [1, 0, 0, 0], "2": [2, 0, 0, 0],
      "3": [2, 1, 0, 0], "4": [2, 2, 0, 0],
      "5": [2, 3, 0, 0], "6": [2, 4, 0, 0],
      "7": [2, 5, 0, 0], "8": [2, 6, 0, 0],
      "9": [2, 7, 0, 0], "10": [2, 8, 0, 0],
      "11": [2, 8, 1, 0], "12": [2, 8, 2, 0],
      "13": [2, 8, 3, 0], "14": [2, 8, 4, 0],
      "15": [2, 8, 5, 0], "16": [2, 8, 6, 0],
      "17": [2, 8, 7, 0], "18": [2, 8, 8, 0],
      "19": [2, 8, 8, 1], "20": [2, 8, 8, 2]
    };

    const atomNames = {
      "1": "ìˆ˜ì†Œ", "2": "í—¬ë¥¨", "3": "ë¦¬íŠ¬", "4": "ë² ë¦´ë¥¨",
      "5": "ë¶•ì†Œ", "6": "íƒ„ì†Œ", "7": "ì§ˆì†Œ", "8": "ì‚°ì†Œ",
      "9": "í”Œë£¨ì˜¤ë¦°", "10": "ë„¤ì˜¨", "11": "ë‚˜íŠ¸ë¥¨",
      "12": "ë§ˆê·¸ë„¤ìŠ˜", "13": "ì•Œë£¨ë¯¸ëŠ„", "14": "ê·œì†Œ",
      "15": "ì¸", "16": "í™©", "17": "ì—¼ì†Œ", "18": "ì•„ë¥´ê³¤",
      "19": "ì¹¼ë¥¨", "20": "ì¹¼ìŠ˜"
    };

    let electrons = [];

    function simulate() {
      const k = +document.getElementById('kShell').value;
      const l = +document.getElementById('lShell').value;
      const m = +document.getElementById('mShell').value;
      const n = +document.getElementById('nShell').value;
      const config = [k, l, m, n];
      const total = k + l + m + n;

      let foundZ = null;
      let state = "ë¯¸í™•ì¸ ì›ì†Œ";
      let stateClass = "unknown";

      for (let z = 1; z <= 20; z++) {
        const ground = knownAtoms[z.toString()];
        const atomName = atomNames[z.toString()];
        const groundTotal = ground.reduce((a, b) => a + b, 0);

        if (total === z) {
          foundZ = z;
          if (JSON.stringify(config) === JSON.stringify(ground)) {
            state = `ë°”ë‹¥ ìƒíƒœì˜ ${atomName} (Z=${z})`;
            stateClass = "ground";
          } else {
            state = `ë“¤ëœ¬ ìƒíƒœì˜ ${atomName} (Z=${z})`;
            stateClass = "excited";
          }
          break;
        }
      }

      if (foundZ === null) {
        state = "ë¯¸í™•ì¸ ì›ì†Œ";
        stateClass = "unknown";
      }

      document.getElementById("resultArea").innerHTML =
        `ğŸŒ ì „ì ìˆ˜: <span class="highlight">${total}</span><br>` +
        `ğŸ“Œ ìƒíƒœ: <span class="${stateClass}">${state}</span>`;

      // ê¶¤ë„ ì´ˆê¸°í™”
      electrons = [];
      const shells = [
        { count: k, radius: 60, color: '#66fcf1' },
        { count: l, radius: 100, color: '#45a29e' },
        { count: m, radius: 140, color: '#c5c6c7' },
        { count: n, radius: 180, color: '#be9fe1' }
      ];

      for (let shell of shells) {
        for (let i = 0; i < shell.count; i++) {
          const angle = (2 * Math.PI * i) / shell.count;
          electrons.push({
            r: shell.radius,
            angle: angle,
            speed: 0.01 + Math.random() * 0.01,
            color: shell.color
          });
        }
      }

      animate();
    }

    function animate() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);

      // í•µ
      ctx.beginPath();
      ctx.arc(centerX, centerY, 20, 0, 2 * Math.PI);
      ctx.fillStyle = "#ff2e63";
      ctx.fill();

      // ê¶¤ë„
      const orbitRadii = [60, 100, 140, 180];
      ctx.strokeStyle = "#ffffff22";
      orbitRadii.forEach(r => {
        ctx.beginPath();
        ctx.arc(centerX, centerY, r, 0, 2 * Math.PI);
        ctx.stroke();
      });

      // ì „ì íšŒì „
      for (let e of electrons) {
        e.angle += e.speed;
        const x = centerX + e.r * Math.cos(e.angle);
        const y = centerY + e.r * Math.sin(e.angle);
        ctx.beginPath();
        ctx.arc(x, y, 5, 0, 2 * Math.PI);
        ctx.fillStyle = e.color;
        ctx.fill();
      }

      requestAnimationFrame(animate);
    }

    simulate(); // ìµœì´ˆ ì‹¤í–‰
  </script>
</body>
</html>
